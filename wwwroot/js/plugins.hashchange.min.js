!function(t){var n,e,r,o,a,i,c,u,f,l,s,p,h,d=Array.prototype.slice,m=decodeURIComponent,v=t.param,g=t.bbq=t.bbq||{},y=t.event.special,b="hashchange",$="querystring",x="fragment",j="elemUrlAttr",w="href",N="src",A=/^.*\?|#.*$/g,C={};function E(t){return"string"==typeof t}function S(t){var n=d.call(arguments,1);return function(){return t.apply(this,n.concat(d.call(arguments)))}}function q(r,a,i,c,u){var p,d,v,g,y;return c!==n?(y=(v=i.match(r?l:/^([^#?]*)\??([^#]*)(#?.*)/))[3]||"",2===u&&E(c)?d=c.replace(r?f:A,""):(g=o(v[2]),c=E(c)?o[r?x:$](c):c,d=2===u?c:1===u?t.extend({},c,g):t.extend({},g,c),d=e(d),r&&(d=d.replace(s,m))),p=v[1]+(r?h:d||!v[1]?"?":"")+d+y):p=a(i!==n?i:location.href),p}function I(t,e,r){return e===n||"boolean"==typeof e?(r=e,e=v[t?x:$]()):e=E(e)?e.replace(t?f:A,""):e,o(e,r)}function R(e,r,o,a){return E(o)||"object"==typeof o||(a=o,o=r,r=n),this.each((function(){var n=t(this),i=r||u()[(this.nodeName||"").toLowerCase()]||"",c=i&&n.attr(i)||"";n.attr(i,v[e](c,o,a))}))}v[$]=S(q,0,(function(t){return t.replace(/(?:^[^?#]*\?([^#]*).*$)?.*/,"$1")})),v[x]=r=S(q,1,(function(t){return t.replace(l,"$2")})),v.sorted=e=function(n,e){var r=[],o={};return t.each(v(n,e).split("&"),(function(t,n){var e=n.replace(/(?:%5B|=).*$/,""),a=o[e];a||(a=o[e]=[],r.push(e)),a.push(n)})),t.map(r.sort(),(function(t){return o[t]})).join("&")},r.noEscape=function(n){n=n||"";var e=t.map(n.split(""),encodeURIComponent);s=new RegExp(e.join("|"),"g")},r.noEscape(",/"),r.ajaxCrawlable=function(t){return t!==n&&(t?(f=/^.*(?:#!|#)/,l=/^([^#]*)(?:#!|#)?(.*)$/,h="#!"):(f=/^.*#/,l=/^([^#]*)#?(.*)$/,h="#"),p=!!t),p},r.ajaxCrawlable(0),t.deparam=o=function(e,r){var o={},a={true:!0,false:!1,null:null};return t.each(e.replace(/\+/g," ").split("&"),(function(e,i){var c,u=i.split("="),f=m(u[0]),l=o,s=0,p=f.split("]["),h=p.length-1;if(/\[/.test(p[0])&&/\]$/.test(p[h])?(p[h]=p[h].replace(/\]$/,""),h=(p=p.shift().split("[").concat(p)).length-1):h=0,2===u.length)if(c=m(u[1]),r&&(c=c&&!isNaN(c)?+c:"undefined"===c?n:a[c]!==n?a[c]:c),h)for(;s<=h;s++)l=l[f=""===p[s]?l.length:p[s]]=s<h?l[f]||(p[s+1]&&isNaN(p[s+1])?{}:[]):c;else t.isArray(o[f])?o[f].push(c):o[f]!==n?o[f]=[o[f],c]:o[f]=c;else f&&(o[f]=r?n:"")})),o},o[$]=S(I,0),o[x]=a=S(I,1),t[j]||(t[j]=function(n){return t.extend(C,n)})({a:w,base:w,iframe:N,img:N,input:N,form:"action",link:w,script:N}),u=t[j],t.fn[$]=S(R,$),t.fn[x]=S(R,x),g.pushState=i=function(t,e){E(t)&&/^#/.test(t)&&e===n&&(e=2);var o=t!==n,a=r(location.href,o?t:{},o?e:2);location.href=a},g.getState=c=function(t,e){return t===n||"boolean"==typeof t?a(t):a(e)[t]},g.removeState=function(e){var r={};e!==n&&(r=c(),t.each(t.isArray(e)?e:arguments,(function(t,n){delete r[n]}))),i(r,2)},y[b]=t.extend(y[b],{add:function(e){var a;function i(t){var e=t[x]=r();t.getState=function(t,r){return t===n||"boolean"==typeof t?o(e,t):o(e,r)[t]},a.apply(this,arguments)}if(t.isFunction(e))return a=e,i;a=e.handler,e.handler=i}})}(jQuery),function(t,n,e){function r(t){return"#"+(t=t||location.href).replace(/^[^#]*#?(.*)$/,"$1")}var o,a="hashchange",i=document,c=t.event.special,u=i.documentMode,f="on"+a in n&&(u===e||u>7);t.fn[a]=function(t){return t?this.bind(a,t):this.trigger(a)},t.fn[a].delay=50,c[a]=t.extend(c[a],{setup:function(){if(f)return!1;t(o.start)},teardown:function(){if(f)return!1;t(o.stop)}}),o=function(){function o(){var e=r(),i=h(l);e!==l?(p(l=e,i),t(n).trigger(a)):i!==l&&(location.href=location.href.replace(/#.*/,"")+i),c=setTimeout(o,t.fn[a].delay)}var c,u={},l=r(),s=function(t){return t},p=s,h=s;return u.start=function(){c||o()},u.stop=function(){c&&clearTimeout(c),c=e},"Microsoft Internet Explorer"===navigator.appName&&!f&&function(){var n,e;u.start=function(){n||(e=(e=t.fn[a].src)&&e+r(),n=t('<iframe tabindex="-1" title="empty"/>').hide().one("load",(function(){e||p(r()),o()})).attr("src",e||"javascript:0").insertAfter("body")[0].contentWindow,i.onpropertychange=function(){try{"title"===event.propertyName&&(n.document.title=i.title)}catch(t){}})},u.stop=s,h=function(){return r(n.location.href)},p=function(e,r){var o=n.document,c=t.fn[a].domain;e!==r&&(o.title=i.title,o.open(),c&&o.write('<script>document.domain="'+c+'"<\/script>'),o.close(),n.location.hash=e)}}(),u}()}(jQuery,this);